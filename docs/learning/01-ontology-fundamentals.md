# 1. ì˜¨í†¨ë¡œì§€ ê¸°ì´ˆ: ì—”í„°í‹° ì„¤ê³„ì˜ ì² í•™

> **í•™ìŠµ ëª©í‘œ**: í˜„ì¬ í”„ë¡œì íŠ¸ì˜ `entities.md`ë¥¼ ë¶„ì„í•˜ë©´ì„œ ì˜¨í†¨ë¡œì§€ì˜ í•µì‹¬ ê°œë…ì„ ì—­ìœ¼ë¡œ ì´í•´í•©ë‹ˆë‹¤.

---

## 1. ì‹œì‘í•˜ê¸° ì „ì—: ì˜¨í†¨ë¡œì§€ë€ ë¬´ì—‡ì¸ê°€?

### 1.1 ë°ì´í„° ëª¨ë¸ë§ vs ì˜¨í†¨ë¡œì§€ ëª¨ë¸ë§

**ì¼ë°˜ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„:**
```
"ê±°ë˜ í…Œì´ë¸”ì„ ë§Œë“¤ì. í•„ìš”í•œ ì»¬ëŸ¼ì€... id, amount, date, merchant_name..."
â†’ ê¸°ëŠ¥(Feature) ì¤‘ì‹¬ ì‚¬ê³ 
```

**ì˜¨í†¨ë¡œì§€ ì„¤ê³„:**
```
"'ê±°ë˜'ë€ ë¬´ì—‡ì¸ê°€? ê±°ë˜ì˜ ë³¸ì§ˆì€? ê±°ë˜ëŠ” ëˆ„êµ¬ì™€ ë¬´ì—‡ì„ ì—°ê²°í•˜ëŠ”ê°€?"
â†’ ê°œë…(Concept)ê³¼ ê´€ê³„ ì¤‘ì‹¬ ì‚¬ê³ 
```

**í•µì‹¬ ì°¨ì´:**
| ê´€ì  | ë°ì´í„° ëª¨ë¸ë§ | ì˜¨í†¨ë¡œì§€ ëª¨ë¸ë§ |
|------|-------------|---------------|
| ëª©ì  | ë°ì´í„° ì €ì¥ ìµœì í™” | **ì§€ì‹ í‘œí˜„** |
| ì¤‘ì‹¬ | í…Œì´ë¸”, ì»¬ëŸ¼ | **ì—”í„°í‹°, ê´€ê³„** |
| ì„¤ê³„ ì§ˆë¬¸ | "ì–´ë–»ê²Œ ì €ì¥í• ê¹Œ?" | **"ì´ê²ƒì€ ë¬´ì—‡ì¸ê°€?"** |
| ì¬ì‚¬ìš©ì„± | í”„ë¡œì íŠ¸ ì¢…ì†ì  | **ë„ë©”ì¸ ì „ë°˜ì— ê±¸ì³ ì¬ì‚¬ìš©** |

### 1.2 ì™œ ê¸°ì—…ë“¤ì´ ì˜¨í†¨ë¡œì§€ë¥¼ ì“°ëŠ”ê°€?

**ì‹¤ì œ ì‚¬ë¡€ ë³µìŠµ:**
- **NASA**: ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ë§ ë°ì´í„°ë¥¼ ì˜¨í†¨ë¡œì§€ë¡œ í†µí•© â†’ ìš”êµ¬ì‚¬í•­ ì¶”ì , ê²€ì¦ ìë™í™”
- **Schneider Electric**: IoT ë””ë°”ì´ìŠ¤ 2,500ë§Œ ì´ë²¤íŠ¸/ì¼ â†’ ì˜¨í†¨ë¡œì§€ë¡œ ì—°ê²°
- **Dow Jones**: ë‰´ìŠ¤ ì—”í„°í‹°(ê¸°ì—…, ì¸ë¬¼, ì‚¬ê±´)ë¥¼ ì˜¨í†¨ë¡œì§€ë¡œ í‘œí˜„ â†’ ê²€ìƒ‰Â·ì¶”ì²œ ì •í™•ë„ í–¥ìƒ

**ê³µí†µì :**
1. **ë³µì¡í•œ ë„ë©”ì¸ ì§€ì‹**ì„ ì²´ê³„ì ìœ¼ë¡œ í‘œí˜„
2. **ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œ** ê°„ ë°ì´í„°ë¥¼ ìë™ ì—°ê²°
3. **ì¶”ë¡ **ìœ¼ë¡œ ëª…ì‹œë˜ì§€ ì•Šì€ ì§€ì‹ ë°œê²¬ (ì˜ˆ: "MCC 7995ëŠ” ë„ë°•" + "ë„ë°•ì€ ë¸”ë™" â†’ "MCC 7995ëŠ” ì°¨ë‹¨")

---

## 2. ì‹¤ì œ í”„ë¡œì íŠ¸ ë¶„ì„: Transaction ì—”í„°í‹°

> ğŸ“‚ íŒŒì¼: `projects/01-expense-fraud-detection/ontology/entities.md` (Line 7-51)

### 2.1 ì—”í„°í‹° ì •ì˜ í•´ë¶€

```markdown
## 1. Transaction (ê±°ë˜)

**ì •ì˜:** ë²•ì¸ì¹´ë“œë¥¼ í†µí•œ ê°œë³„ ê¸ˆìœµ ê±°ë˜ ê¸°ë¡

**ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸:** ì§ì›ì´ ë²•ì¸ì¹´ë“œë¡œ ìƒí’ˆ/ì„œë¹„ìŠ¤ë¥¼ êµ¬ë§¤í•œ ë‹¨ì¼ ì´ë²¤íŠ¸.
                 ìŠ¹ì¸ê³¼ ë§¤ì… ë‹¨ê³„ë¥¼ ëª¨ë‘ í¬í•¨.
```

**ë¶„ì„: ì™œ ì´ë ‡ê²Œ ì •ì˜í–ˆëŠ”ê°€?**

1. **"ê°œë³„ ê¸ˆìœµ ê±°ë˜"**:
   - âŒ "ê±°ë˜ ë‚´ì—­" (ë„ˆë¬´ ëª¨í˜¸)
   - âœ… "ê°œë³„ ê¸ˆìœµ ê±°ë˜ ê¸°ë¡" (ëª…í™•í•œ ë²”ìœ„)

2. **"ìŠ¹ì¸ê³¼ ë§¤ì… ë‹¨ê³„ë¥¼ ëª¨ë‘ í¬í•¨"**:
   - ì¹´ë“œ ê±°ë˜ëŠ” ìŠ¹ì¸(Authorization) â†’ ë§¤ì…(Settlement) 2ë‹¨ê³„
   - ì´ ì—”í„°í‹° í•˜ë‚˜ë¡œ ì „ì²´ ë¼ì´í”„ì‚¬ì´í´ í‘œí˜„
   - â†’ **ì„¤ê³„ ì² í•™**: ì—”í„°í‹°ëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œì„¸ìŠ¤ì˜ í•œ ì£¼ê¸°**ë¥¼ ë‹´ì•„ì•¼ í•¨

### 2.2 ì†ì„±(Attribute) ì„¤ê³„ ë¶„ì„

#### í•„ìˆ˜(Required) vs ì„ íƒ(Optional)ì˜ ê¸°ì¤€

| ì†ì„± | í•„ìˆ˜ | ì´ìœ  |
|------|------|------|
| `id` | âœ“ | ëª¨ë“  ì—”í„°í‹°ì˜ ì •ì²´ì„±(Identity) |
| `amount` | âœ“ | ê±°ë˜ì˜ ë³¸ì§ˆì  ì†ì„± (ê¸ˆì•¡ ì—†ëŠ” ê±°ë˜ëŠ” ì¡´ì¬ ë¶ˆê°€) |
| `location` | â—‹ | ì˜¨ë¼ì¸ ê±°ë˜ëŠ” ë¬¼ë¦¬ì  ìœ„ì¹˜ ì—†ìŒ |
| `risk_score` | â—‹ | **ê³„ì‚°ë˜ëŠ”** ì†ì„±ì´ë¯€ë¡œ ì„ íƒì  |

**ê°œë… í¬ì¸íŠ¸ 1: ë³¸ì§ˆì  ì†ì„± vs íŒŒìƒ ì†ì„±**

```
ë³¸ì§ˆì  ì†ì„±: ì—”í„°í‹°ê°€ ìƒì„±ë  ë•Œë¶€í„° ì¡´ì¬
  - amount, transacted_at, merchant_id

íŒŒìƒ ì†ì„±: ë‹¤ë¥¸ ì†ì„±ì´ë‚˜ ê·œì¹™ìœ¼ë¡œë¶€í„° ê³„ì‚°ë¨
  - risk_score (ìŠ¤ì½”ì–´ë§ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ê³„ì‚°)
  - policy_evaluation_result (ì •ì±… í‰ê°€ë¡œ ìƒì„±)
```

**ì™œ íŒŒìƒ ì†ì„±ë„ ì €ì¥í•˜ëŠ”ê°€?**
- ì¶”ì ì„±(Audit): ë‹¹ì‹œì˜ ì ìˆ˜ë¥¼ ê¸°ë¡ (ìŠ¤ì½”ì–´ë§ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½ í›„ì—ë„ ê³¼ê±° ì ìˆ˜ í™•ì¸)
- ì„±ëŠ¥: ë§¤ë²ˆ ì¬ê³„ì‚°í•˜ì§€ ì•Šê³  ìºì‹±

#### ì œì•½ì¡°ê±´(Constraints)ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸

```markdown
| `amount` | Decimal(15,2) | âœ“ | ê±°ë˜ ê¸ˆì•¡ | > 0 |
```

**ë¶„ì„:**
- `Decimal(15,2)`: ì •ìˆ˜ 13ìë¦¬ + ì†Œìˆ˜ì  2ìë¦¬ â†’ ìµœëŒ€ 999ì¡° ì›ê¹Œì§€ í‘œí˜„ ê°€ëŠ¥
- `> 0`: í™˜ë¶ˆ(REFUND)ë„ ì–‘ìˆ˜ë¡œ ì €ì¥í•˜ê³  `transaction_type`ìœ¼ë¡œ êµ¬ë¶„

**ê°œë… í¬ì¸íŠ¸ 2: ì œì•½ì¡°ê±´ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì˜ ì²« ë²ˆì§¸ ë°©ì–´ì„ **

```
ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ê³„ì¸µ:
1ë‹¨ê³„: ë°ì´í„° íƒ€ì…/ì œì•½ì¡°ê±´ (amount > 0)
2ë‹¨ê³„: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ (amountëŠ” vat_amountì˜ 10ë°° ì´ë‚´)
3ë‹¨ê³„: ì •ì±… ê·œì¹™ (amount >= 100,000ì´ë©´ ì¦ë¹™ í•„ìˆ˜)
```

### 2.3 ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ë¶„ì„

```markdown
### ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

1. **ê¸ˆì•¡ ê²€ì¦**: `amount`ëŠ” ë°˜ë“œì‹œ ì–‘ìˆ˜. `vat_amount`ëŠ” `amount`ì˜ 10% ì´í•˜ (í•œêµ­ ë¶€ê°€ì„¸ìœ¨)
2. **ì‹œê°„ ì •í•©ì„±**: `transacted_at`ì€ ë¯¸ë˜ ì‹œì ì¼ ìˆ˜ ì—†ìŒ
3. **ìƒíƒœ ì „ì´**: APPROVED â†’ SETTLED â†’ (CANCELLED | DISPUTED)ë§Œ í—ˆìš©
4. **ì˜¨ë¼ì¸/ìœ„ì¹˜**: `is_online = true`ì¸ ê²½ìš° `location`ì€ ê°€ë§¹ì  ë“±ë¡ ì£¼ì†Œ ì‚¬ìš©
```

**ì™œ ì—”í„°í‹° ì •ì˜ì— ê·œì¹™ì„ í¬í•¨í•˜ëŠ”ê°€?**

â†’ ì˜¨í†¨ë¡œì§€ëŠ” ë‹¨ìˆœ ë°ì´í„° êµ¬ì¡°ê°€ ì•„ë‹ˆë¼ **"ì‚´ì•„ìˆëŠ” ì§€ì‹ ì²´ê³„"**

**ê°œë… í¬ì¸íŠ¸ 3: ì„ ì–¸ì  ê·œì¹™(Declarative Rules)**

```python
# ì ˆì°¨ì (Procedural) ë°©ì‹
if transaction.transacted_at > datetime.now():
    raise ValueError("ë¯¸ë˜ ê±°ë˜ ë¶ˆê°€")

# ì„ ì–¸ì (Declarative) ë°©ì‹ (ì˜¨í†¨ë¡œì§€)
constraints:
  - transacted_at: NOT_FUTURE
```

ì„ ì–¸ì  ë°©ì‹ì˜ ì¥ì :
- ì½”ë“œ ì—†ì´ë„ ê·œì¹™ ì´í•´ ê°€ëŠ¥
- ì¶”ë¡  ì—”ì§„ì´ ìë™ ê²€ì¦
- ê·œì¹™ ë³€ê²½ ì‹œ ë¡œì§ ìˆ˜ì • ë¶ˆí•„ìš”

---

## 3. ì—”í„°í‹° ê°„ ë¹„êµ: MCC vs Merchant

> ğŸ“‚ íŒŒì¼: `entities.md` (Line 53-141)

### 3.1 ë‘ ì—”í„°í‹°ì˜ ì—­í• 

| ì—”í„°í‹° | ì •ì˜ | ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ | ë³€ê²½ ë¹ˆë„ |
|--------|------|------------|----------|
| **MCC** | ì—…ì¢… ë¶„ë¥˜ í‘œì¤€ ì½”ë“œ | ~1,000ê°œ (Visa/MC ì •ì˜) | ê±°ì˜ ì—†ìŒ |
| **Merchant** | ì‹¤ì œ ê°€ë§¹ì  | ìˆ˜ë§Œ~ìˆ˜ì‹­ë§Œ ê°œ | ë§¤ìš° ë¹ˆë²ˆ |

### 3.2 ì™œ ë¶„ë¦¬í–ˆëŠ”ê°€?

**ë‚˜ìœ ì„¤ê³„ (ë¶„ë¦¬í•˜ì§€ ì•ŠìŒ):**
```json
{
  "merchant_name": "ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì ",
  "category": "ìŒì‹ì ",
  "risk_level": 0
}
```

ë¬¸ì œ:
- ìŠ¤íƒ€ë²…ìŠ¤ 1,000ê°œ ì§€ì ë§ˆë‹¤ "ìŒì‹ì ", risk_level 0 ì¤‘ë³µ ì €ì¥
- MCC ì •ì±… ë³€ê²½ ì‹œ ëª¨ë“  ê°€ë§¹ì  ë ˆì½”ë“œ ìˆ˜ì • í•„ìš”

**ì¢‹ì€ ì„¤ê³„ (ë¶„ë¦¬):**
```json
MCC: {
  "code": "5812",
  "category": "Eating Places",
  "risk_level": 0
}

Merchant: {
  "name": "ìŠ¤íƒ€ë²…ìŠ¤ ê°•ë‚¨ì ",
  "mcc_id": "5812"  // ì°¸ì¡°ë§Œ
}
```

**ê°œë… í¬ì¸íŠ¸ 4: ì •ê·œí™”(Normalization) vs ì˜¨í†¨ë¡œì§€ ê³„ì¸µ(Hierarchy)**

| ê´€ì  | ì •ê·œí™” (DB) | ì˜¨í†¨ë¡œì§€ |
|------|------------|----------|
| ëª©ì  | ì¤‘ë³µ ì œê±° | **ê°œë…ì˜ ê³„ì¸µ í‘œí˜„** |
| ë¶„ë¦¬ ê¸°ì¤€ | í•¨ìˆ˜ ì¢…ì†ì„± | **ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ë¯¸ì˜ ë…ë¦½ì„±** |

MCCëŠ” ë‹¨ìˆœíˆ "ì¤‘ë³µ ì œê±°"ê°€ ì•„ë‹ˆë¼ **"ì—…ì¢…ì´ë¼ëŠ” ë…ë¦½ì  ê°œë…"**ì´ê¸°ì— ë¶„ë¦¬

### 3.3 ì‹¤ì œ ë¶„ì„: MCCì˜ ì†ì„± ì„¤ê³„

```markdown
| `is_gambling` | Boolean | âœ“ | ë„ë°• ì—¬ë¶€ | Default: false |
| `is_entertainment` | Boolean | âœ“ | ìœ í¥ ì—¬ë¶€ | Default: false |
| `requires_justification` | Boolean | âœ“ | ì‚¬ìœ  í•„ìˆ˜ ì—¬ë¶€ | Default: false |
```

**ì™œ ì´ëŸ° Boolean ì†ì„±ë“¤ì´ í•„ìš”í•œê°€?**

â†’ **ì¶”ë¡ ê³¼ ì •ì±… í‰ê°€ì˜ ì†ë„**

```python
# Boolean ì†ì„± ì—†ì´ (ëŠë¦¼)
if mcc.code in ["7995", "7273", "..."]:  # ë§¤ë²ˆ ë¦¬ìŠ¤íŠ¸ ê²€ìƒ‰
    action = "BLOCK"

# Boolean ì†ì„± ì‚¬ìš© (ë¹ ë¦„)
if mcc.is_gambling:  # O(1) ì¡°íšŒ
    action = "BLOCK"
```

**ê°œë… í¬ì¸íŠ¸ 5: ê³„ì‚° ê°€ëŠ¥í•œ ì†ì„±ì„ ì™œ ì €ì¥í•˜ëŠ”ê°€?**

`is_gambling`ì€ `code == "7995"`ë¡œë„ ì•Œ ìˆ˜ ìˆì§€ë§Œ ì €ì¥í•˜ëŠ” ì´ìœ :
1. **ì„±ëŠ¥**: ì‹¤ì‹œê°„ ê±°ë˜ í‰ê°€ (ë°€ë¦¬ì´ˆ ë‹¨ìœ„)
2. **ëª…ì‹œì„±**: ì½”ë“œë§Œ ë³´ê³ ë„ ë„ë°• ì—¬ë¶€ ì¦‰ì‹œ íŒŒì•…
3. **ìœ ì—°ì„±**: í–¥í›„ ë„ë°• MCC ì¶”ê°€ ì‹œ Booleanë§Œ ë³€ê²½

---

## 4. ë³µì¡í•œ ì—”í„°í‹°: Case (ì‚¬ê±´)

> ğŸ“‚ íŒŒì¼: `entities.md` (Line 335-375)

### 4.1 ì™œ Caseë¥¼ ë³„ë„ ì—”í„°í‹°ë¡œ?

**ì§ˆë¬¸:** Transactionì— `is_fraud` Boolean í•˜ë‚˜ ì¶”ê°€í•˜ë©´ ë˜ì§€ ì•Šë‚˜?

**ë‹µë³€:** CaseëŠ” ë‹¨ìˆœ í”Œë˜ê·¸ê°€ ì•„ë‹ˆë¼ **"ì¡°ì‚¬ í”„ë¡œì„¸ìŠ¤ ì „ì²´"**ë¥¼ ë‹´ëŠ” ì—”í„°í‹°

```markdown
| ì†ì„±ëª… | ì„¤ëª… |
|--------|------|
| `case_type` | ì‚¬ê±´ ìœ í˜• (BLACKLIST_MCC, HIGH_RISK_SCORE, ...) |
| `status` | ì²˜ë¦¬ ìƒíƒœ (OPEN, UNDER_REVIEW, RESOLVED, CLOSED) |
| `assigned_to` | ë‹´ë‹¹ì |
| `resolution` | ì²˜ë¦¬ ê²°ê³¼ (APPROVED, REJECTED, RECOVERED, WARNING_ISSUED) |
| `amount_recovered` | íšŒìˆ˜ ê¸ˆì•¡ |
| `previous_case_ids` | ì´ì „ ì‚¬ê±´ ID ëª©ë¡ (ì¬ë²” ì¶”ì ) |
```

**ê°œë… í¬ì¸íŠ¸ 6: ì—”í„°í‹°ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ë‹´ëŠ”ë‹¤**

```
Transaction: ê±°ë˜ì˜ ìƒëª…ì£¼ê¸° (ìŠ¹ì¸ â†’ ë§¤ì… â†’ ì •ì‚°)
Case: ì¡°ì‚¬ì˜ ìƒëª…ì£¼ê¸° (íƒì§€ â†’ ê²€í†  â†’ í•´ê²° â†’ ì¢…ê²°)
```

ê°ê°ì€ ë…ë¦½ì ì¸ **ìƒíƒœ ê¸°ê³„(State Machine)**

### 4.2 ì¬ë²” ì¶”ì  ì„¤ê³„ ë¶„ì„

```markdown
| `is_repeat_offense` | Boolean | âœ“ | ì¬ë²” ì—¬ë¶€ | Default: false |
| `previous_case_ids` | Array[UUID] | â—‹ | ì´ì „ ì‚¬ê±´ ID ëª©ë¡ | FK â†’ Case[] |
```

**ì™œ Booleanê³¼ Arrayë¥¼ ë™ì‹œì—?**

```python
# ì„±ëŠ¥ ì¿¼ë¦¬: ì¬ë²”ìë§Œ ë¹ ë¥´ê²Œ ì¡°íšŒ
SELECT * FROM Case WHERE is_repeat_offense = true

# ìƒì„¸ ì¶”ì : ì¬ë²” ì´ë ¥ ì „ì²´ ì¡°íšŒ
SELECT * FROM Case WHERE id = ANY(previous_case_ids)
```

**ê°œë… í¬ì¸íŠ¸ 7: ìºì‹± vs ì •ê·œí™”ì˜ ê· í˜•**

- `is_repeat_offense`: ìºì‹± (ë¹ ë¥¸ í•„í„°ë§)
- `previous_case_ids`: ì •ê·œí™” (ì •í™•í•œ ì¶”ì )

---

## 5. ì˜¨í†¨ë¡œì§€ ì„¤ê³„ ì›ì¹™ ì •ë¦¬

í˜„ì¬ í”„ë¡œì íŠ¸ì˜ 10ê°œ ì—”í„°í‹°ë¥¼ ë¶„ì„í•˜ë©° ì¶”ì¶œí•œ ì›ì¹™:

### ì›ì¹™ 1: ì—”í„°í‹°ëŠ” "ëª…ì‚¬"ê°€ ì•„ë‹ˆë¼ "ê°œë…"ì´ë‹¤

âŒ "ì´ ì •ë³´ë¥¼ ì €ì¥í•´ì•¼ í•˜ë‹ˆê¹Œ ì—”í„°í‹° ë§Œë“¤ì"
âœ… "ì´ ê°œë…ì´ ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œ ë…ë¦½ì  ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ”ê°€?"

**ì˜ˆì‹œ:**
- `Receipt`ëŠ” ë‹¨ìˆœ "ì²¨ë¶€ íŒŒì¼"ì´ ì•„ë‹ˆë¼ **"ì ë²•ì„± ì¦ëª…"**ì´ë¼ëŠ” ê°œë…
- `Policy`ëŠ” "ì„¤ì •"ì´ ì•„ë‹ˆë¼ **"ê·œì¹™ì˜ ë²„ì „ ê´€ë¦¬ëœ ì§‘í•©"**

### ì›ì¹™ 2: ì†ì„±ì€ ì¸¡ì • ê°€ëŠ¥í•˜ê³  ê²€ì¦ ê°€ëŠ¥í•´ì•¼ í•œë‹¤

```markdown
âœ… amount: Decimal(15,2), > 0
âœ… transacted_at: DateTime, ISO 8601
âŒ "ëŒ€ëµì ì¸ ê±°ë˜ ì‹œì "
âŒ "ë§ì€ ê¸ˆì•¡"
```

### ì›ì¹™ 3: ì—”í„°í‹° ê°œìˆ˜ëŠ” 10ê°œ ì´í•˜ë¥¼ ê¶Œì¥

**ì´ìœ :**
- 10ê°œ ì´ˆê³¼ ì‹œ ê´€ê³„ ë³µì¡ë„ í­ë°œ (nÂ² ê°œì˜ ê´€ê³„ ê°€ëŠ¥)
- ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
- í•µì‹¬ ê°œë…ì— ì§‘ì¤‘

í˜„ì¬ í”„ë¡œì íŠ¸: **ì •í™•íˆ 10ê°œ** â†’ ì˜ ì„¤ê³„ë¨

### ì›ì¹™ 4: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì€ ì—”í„°í‹°ì— ëª…ì‹œ

```markdown
### ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™

1. **ê¸ˆì•¡ ê²€ì¦**: ...
2. **ì‹œê°„ ì •í•©ì„±**: ...
```

ì½”ë“œê°€ ì•„ë‹ˆë¼ **ì„ ì–¸ì  ë¬¸ì„œ**ë¡œ ê´€ë¦¬ â†’ ë¹„ê°œë°œìë„ ì´í•´ ê°€ëŠ¥

### ì›ì¹™ 5: ë¼ì´í”„ì‚¬ì´í´ì„ ëª…ì‹œ

```markdown
### ë¼ì´í”„ì‚¬ì´í´

[ìŠ¹ì¸ ìš”ì²­] â†’ APPROVED â†’ [ë§¤ì… ì²˜ë¦¬] â†’ SETTLED â†’ [ì •ì‚° ì™„ë£Œ]
                â†“                          â†“
            CANCELLED                  DISPUTED
```

â†’ ì—”í„°í‹°ì˜ **ìƒíƒœ ì „ì´ ê·œì¹™** ëª…í™•í™”

---

## 6. ì‹¤ìŠµ: ì§ì ‘ ë¶„ì„í•´ë³´ê¸°

### ê³¼ì œ 1: Employee ì—”í„°í‹° ë¶„ì„

> ğŸ“‚ íŒŒì¼: `entities.md` (Line 145-181)

**ì§ˆë¬¸:**
1. `spending_limit_daily`ì™€ `spending_limit_monthly`ë¥¼ ì™œ ë‘˜ ë‹¤ ì €ì¥í•˜ëŠ”ê°€?
2. `is_frequent_traveler` Booleanì´ ë¦¬ìŠ¤í¬ ìŠ¤ì½”ì–´ë§ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ì£¼ëŠ”ê°€?
3. `approval_authority`ëŠ” ì–´ë–¤ ê´€ê³„ì—ì„œ ì‚¬ìš©ë˜ëŠ”ê°€?

<details>
<summary>ğŸ’¡ íŒíŠ¸ (í´ë¦­í•´ì„œ ë³´ê¸°)</summary>

1. ì¼ì¼ í•œë„ì™€ ì›” í•œë„ëŠ” **ë…ë¦½ì  ì œì•½**
   - ì¼ì¼ 100ë§Œì›, ì›” 1,000ë§Œì› ì„¤ì • ê°€ëŠ¥
   - í•œ ìª½ë§Œ ì €ì¥í•˜ë©´ ë‹¤ë¥¸ ìª½ ê³„ì‚° ë¶ˆê°€

2. `is_frequent_traveler`ëŠ” `scoring.md` (Line 221)ì—ì„œ ì‚¬ìš©:
   ```
   ë¹ˆë²ˆ ì¶œì¥ì: ì‹œê°„/ìœ„ì¹˜ íŒ¨í„´ ê°€ì¤‘ì¹˜ 50% ê°ì†Œ
   ```

3. `Approval` ì—”í„°í‹°ì˜ `approver_id` ê²€ì¦:
   ```
   approver_idëŠ” ë°˜ë“œì‹œ Employee.approval_authority = true
   ```
</details>

### ê³¼ì œ 2: TaxRule ì—”í„°í‹°ì˜ ì„¤ê³„ ì² í•™ ì´í•´

> ğŸ“‚ íŒŒì¼: `entities.md` (Line 379-431)

**ì§ˆë¬¸:**
1. ì™œ ì„¸ë²• ì¡°ë¬¸ì„ ë³„ë„ ì—”í„°í‹°ë¡œ ë§Œë“¤ì—ˆëŠ”ê°€?
2. `effective_from`ê³¼ `effective_until`ì˜ ì—­í• ì€?
3. `auto_tag_conditions` JSON í•„ë“œì˜ ëª©ì ì€?

<details>
<summary>ğŸ’¡ ë‹µì•ˆ</summary>

1. **ì„¸ë²•ì€ ì‹œê°„ì— ë”°ë¼ ë³€í•˜ëŠ” ì™¸ë¶€ ì§€ì‹**
   - ë²• ê°œì • ì‹œ ìƒˆ ë²„ì „ ìƒì„±
   - ê³¼ê±° ê±°ë˜ëŠ” ë‹¹ì‹œ ìœ íš¨í–ˆë˜ ë²• ë²„ì „ ì°¸ì¡° (ê°ì‚¬ ì¶”ì )

2. **ë²„ì „ ê´€ë¦¬**:
   - `effective_from`: ì´ ë²•ì´ ì–¸ì œë¶€í„° ìœ íš¨í•œê°€
   - `effective_until`: nullì´ë©´ í˜„í–‰ë²•, ë‚ ì§œê°€ ìˆìœ¼ë©´ íì§€ëœ ë²•

3. **ìë™ íƒœê¹…**:
   ```json
   "auto_tag_conditions": {
     "mcc_in": ["7995"],
     "amount_gt": 0
   }
   ```
   â†’ MCC 7995 ê±°ë˜ëŠ” ìë™ìœ¼ë¡œ "ë²•ì¸ì„¸ë²• ì œ27ì¡°" íƒœê·¸

</details>

---

## 7. ë‹¤ìŒ ë‹¨ê³„

ì˜¨í†¨ë¡œì§€ ì—”í„°í‹°ì˜ ê°œë…ì„ ì´í•´í–ˆë‹¤ë©´, ì´ì œ **ê´€ê³„(Relationship)**ë¥¼ ë°°ìš¸ ì°¨ë¡€ì…ë‹ˆë‹¤.

**ë‹¤ìŒ í•™ìŠµ ë¬¸ì„œ:**
- `02-relationships-and-graphs.md`: ì—”í„°í‹° ê°„ ê´€ê³„ë¥¼ ê·¸ë˜í”„ë¡œ í‘œí˜„í•˜ê³  ìˆœíšŒí•˜ëŠ” ë°©ë²•

**í•µì‹¬ ì§ˆë¬¸ ë¯¸ë¦¬ë³´ê¸°:**
- Transactionê³¼ MerchantëŠ” ì–´ë–¤ ê´€ê³„ì¸ê°€? (N:1ì˜ ì˜ë¯¸)
- ì™œ Trip/Eventì™€ Transactionì€ N:N ê´€ê³„ì¸ê°€?
- Cypher ì¿¼ë¦¬ë¡œ "3ë‹¨ê³„ ë–¨ì–´ì§„ ê´€ê³„"ë¥¼ ì–´ë–»ê²Œ ì°¾ëŠ”ê°€?

---

## 8. ì°¸ê³  ìë£Œ

### í˜„ì¬ í”„ë¡œì íŠ¸ íŒŒì¼
- `projects/01-expense-fraud-detection/ontology/entities.md`
- `projects/01-expense-fraud-detection/GUIDE.md`

### ì™¸ë¶€ ë¦¬ì†ŒìŠ¤
- [Palantir Ontology ê³µì‹ ë¬¸ì„œ](https://www.palantir.com/platforms/foundry/foundry-ontology/)
- [W3C Ontology Engineering](https://www.w3.org/TR/owl2-overview/)

### ì‹¤ì œ ì‚¬ë¡€
- NASA: ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´ë§ ì˜¨í†¨ë¡œì§€
- Schneider Electric: Building Graph (IoT ì˜¨í†¨ë¡œì§€)

---

**Last Updated:** 2025-10-20
**Version:** 1.0
**í•™ìŠµ ì‹œê°„:** ì•½ 45ë¶„
